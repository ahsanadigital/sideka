/**
 * File: base.js
 * Description: This file contain any code for core javascript notification and also ajax
 * Author: Amir Zuhdi Wibowo
 * Created: 2024-05-09
 * Last Modified: 2024-05-09
 */
function swalNotify(t,e,a,s){Swal.fire({title:t,text:e,icon:a,timer:s})}function swalToast(t,e,a,s="top-end"){let n=Swal.mixin({toast:!0,position:s,showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen(t){t.onmouseenter=Swal.stopTimer,t.onmouseleave=Swal.resumeTimer}});n.fire({icon:t,title:e,text:a})}function toastrToast(t,e,a,s="toast-top-right"){toastr.options={closeButton:!0,debug:!1,newestOnTop:!0,progressBar:!0,positionClass:s,preventDuplicates:!1,onclick:null,showDuration:"300",hideDuration:"1000",timeOut:"3000",extendedTimeOut:"1000",showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"},toastr[t](a,e)}const swalWithBootstrapButtons=Swal.mixin({customClass:{confirmButton:"btn-lg btn btn-success",cancelButton:"btn-lg btn btn-danger",actions:"gap-3 flex-column-reverse flex-lg-row align-items-stretch align-items-lg-center w-100 px-3 px-md-0 justify-content-stretch justify-content-lg-center d-flex"},buttonsStyling:!1});function runModalConfirmWithSubmit(t,e,a){swalWithBootstrapButtons.fire({title:"Konfirmasi",text:t,icon:"warning",showCancelButton:!0,confirmButtonText:"Ya",cancelButtonText:"Tidak",reverseButtons:!0,...a}).then(({isConfirmed:t})=>{t&&$(e).submit()})}const resetError=t=>{$("button,input").attr("disabled",!0),t.find(".error-wrapper").empty(),t.find("input").removeClass("is-invalid")},enableInputs=()=>{$("button,input").removeAttr("disabled")},showTheFormError=(t,e)=>{let a=t.errors;$.each(a,function(t,a){let s=e.find(`input[name="${t}"]`);s.addClass("is-invalid"),s.parent().find(".error-wrapper").html(`<div class="text-danger">${a[0]}</div>`)})};function disableHashbangLink(){$("a").each((t,e)=>{let a=$(e).attr("href");a&&-1!==a.indexOf("#")&&e.addEventListener("click",t=>{t.preventDefault()})})}function initFormAjax(t,e,a,s){$(document).ready(function(){$(t).submit(function(t){t.preventDefault();var n=$(this);n&&$.ajax({url:n.attr("action"),type:n.attr("method"),data:n.serialize(),beforeSend:function(t){t.setRequestHeader("X-Requested-With","XMLHttpRequest"),toastrToast("info","Mengirim"),resetError(n)},success(t,a,s){e?e(t,a,s):(200===s.status&&n.data("redirect-on-success")&&(toastrToast("success","Berhasil!",n.data("success-message")??"Telah berhasil dilakukan!"),setTimeout(function(){window.location.href=n.data("redirect-on-success")??""},5e3)),200===s.status&&n.data("reload-table")&&($(`${n.data("target")}`).DataTable().ajax.reload(),toastrToast("success","Berhasil!",n.data("success-message")??"Telah berhasil dilakukan!")))},error(t,e,s){enableInputs(),a?a(t,e,s):422===t.status?(showTheFormError(t.responseJSON,n),toastrToast("error","Ada Sedikit Kesalahan!","Mohon periksa kembali inputan yang tidak sesuai!")):toastrToast("error","Ada Sedikit Kesalahan!","Ada sedikit kesalahan di server. Coba lagi beberapa menit.")},complete(){s&&s()}})})})}function initAll(){initFormAjax(".form-ajax"),disableHashbangLink()}initAll();
