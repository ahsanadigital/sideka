/**
 * File: base.js
 * Description: This file contain any code for core javascript notification and also ajax
 * Author: Amir Zuhdi Wibowo
 * Created: 2024-05-09
 * Last Modified: 2024-05-09
 */
function swalNotify(t,e,r,a){Swal.fire({title:t,text:e,icon:r,timer:a})}const resetError=()=>{$("button,input").attr("disabled",!0),$(".error-wrapper").empty(),$("input").removeClass("is-invalid")},enableInputs=()=>{$("button,input").removeAttr("disabled")},showTheFormError=t=>{let e=t.errors;$.each(e,function(t,e){let r=$(`input[name="${t}"]`);r.addClass("is-invalid"),r.parent().find(".error-wrapper").html(`<div class="text-danger">${e[0]}</div>`)})};$(document).ready(function(){$('button[type="submit"]').click(function(t){t.preventDefault();var e=$(this).closest("form");e&&$.ajax({url:e.attr("action"),type:e.attr("method"),data:e.serialize(),beforeSend:function(t){t.setRequestHeader("X-Requested-With","XMLHttpRequest"),resetError()},success:function(t,r,a){200===a.status&&e.data("redirect-on-success")&&setTimeout(function(){window.location.href=e.data("redirect-on-success")??""},5e3),200===a.status&&e.data("reload-table")&&$('[data-reload-table][data-target=""]').DataTable().ajax.reload()},error:function(t,e,r){$(this).removeAttr("disabled"),422===t.status&&showTheFormError(t.responseJSON)}})})});
